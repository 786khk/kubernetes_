# 네임스페이스
- master node로 요청이 들어오면 클러스더가 여러개인것처럼 만들어줌..-> ```이해안감.```
- 실제 하나의  물리적 클러스터를 어플리케이션을 운영하는 분영에 따라 논리적으로 분류해 그루핑

## namespace 조희
```
# 네임스페이스 조회
kubectl get namespaces

PS C:\Users\User> kubectl get namespaces
NAME              STATUS   AGE
default           Active   24h
kube-node-lease   Active   24h
kube-public       Active   24h
kube-system       Active   24h
```

- 기본 디폴트 네임스페이스 출력
- kube~ 는 쿠버네티스 운영을 위해 만들어진 네임스페이스


```


PS C:\Users\User> kubectl get pods --all-namespaces
NAMESPACE     NAME                                     READY   STATUS    RESTARTS       AGE
kube-system   coredns-5dd5756b68-2jmcb                 1/1     Running   1 (108s ago)   24h
kube-system   coredns-5dd5756b68-xgrzc                 1/1     Running   1 (108s ago)   24h
kube-system   etcd-docker-desktop                      1/1     Running   1 (108s ago)   24h
kube-system   kube-apiserver-docker-desktop            1/1     Running   1 (108s ago)   24h
kube-system   kube-controller-manager-docker-desktop   1/1     Running   1 (108s ago)   24h
kube-system   kube-proxy-sdxmh                         1/1     Running   1 (108s ago)   24h
kube-system   kube-scheduler-docker-desktop            1/1     Running   1 (108s ago)   24h
kube-system   storage-provisioner                      1/1     Running   2 (84s ago)    24h
kube-system   vpnkit-controller                        1/1     Running   1 (108s ago)   24h
PS C:\Users\User>



```

yaml파일 실행
```
kubectl create -f [파일명]

```
- 이때  -n 이라는 네임스페이스를 지정안하면default 에 생성됨


- 아래는 kube-system 에 생성된 기본 pod

```
PS C:\Users\User> kubectl get pod -n kube-system
NAME                                     READY   STATUS    RESTARTS        AGE
coredns-5dd5756b68-2jmcb                 1/1     Running   1 (3m43s ago)   24h
coredns-5dd5756b68-xgrzc                 1/1     Running   1 (3m43s ago)   24h
etcd-docker-desktop                      1/1     Running   1 (3m43s ago)   24h
kube-apiserver-docker-desktop            1/1     Running   1 (3m43s ago)   24h
kube-controller-manager-docker-desktop   1/1     Running   1 (3m43s ago)   24h
kube-proxy-sdxmh                         1/1     Running   1 (3m43s ago)   24h
kube-scheduler-docker-desktop            1/1     Running   1 (3m43s ago)   24h
storage-provisioner                      1/1     Running   2 (3m19s ago)   24h
vpnkit-controller                        1/1     Running   1 (3m43s ago)   24h

```


## namespace 생성
```
# 명력먹 방법
 kubectl create namespace [내가 만들 네임스페이스 이름]

# 선언적 방법
vi [파일명 - 무조건 확장자는 yaml || yml]

apiVersion: v1
kind: Namespace
metadata:
  name: [내가 만들 네임스페이스 이름]



kubectl create -f [yml 파일명]
```

#### 내가 만든 네임스페이스를 디폴트로 지정하는 방법
- 네임스페이스 등록

```
kubectl config --help
PS E:\0.문서\2.교육\k8s> kubectl config --help
Modify kubeconfig files using subcommands like "kubectl config set current-context my-context".

 The loading order follows these rules:

  1.  If the --kubeconfig flag is set, then only that file is loaded. The flag may only be set once and no merging takes
place.
  2.  If $KUBECONFIG environment variable is set, then it is used as a list of paths (normal path delimiting rules for
your system). These paths are merged. When a value is modified, it is modified in the file that defines the stanza. When
a value is created, it is created in the first file that exists. If no files in the chain exist, then it creates the
last file in the list.
  3.  Otherwise, ${HOME}/.kube/config is used and no merging takes place.

Available Commands:
  current-context   Display the current-context
  delete-cluster    Delete the specified cluster from the kubeconfig
  delete-context    Delete the specified context from the kubeconfig
  delete-user       Delete the specified user from the kubeconfig
  get-clusters      Display clusters defined in the kubeconfig
  get-contexts      Describe one or many contexts
  get-users         Display users defined in the kubeconfig
  rename-context    Rename a context from the kubeconfig file
  set               Set an individual value in a kubeconfig file
  set-cluster       Set a cluster entry in kubeconfig
  set-context       Set a context entry in kubeconfig
  set-credentials   Set a user entry in kubeconfig
  unset             Unset an individual value in a kubeconfig file
  use-context       Set the current-context in a kubeconfig file
  view              Display merged kubeconfig settings or a specified kubeconfig file

Usage:
  kubectl config SUBCOMMAND [options]

Use "kubectl config <command> --help" for more information about a given command.
Use "kubectl options" for a list of global command-line options (applies to all commands).
---
kubectl config 
kubectl config set-context [my-context] --cluster=kubernetes --user=kubernetes-admin --namespace=[my-context] 
# 이때 my-context 는 내가만들 네임스페이스 `이름@kubernetes` 도 가능
kubectl config view
---
PS E:\0.문서\2.교육\k8s> kubectl config view
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    server: https://kubernetes.docker.internal:6443
  name: docker-desktop
contexts:
- context:
    cluster: docker-desktop
    user: docker-desktop
  name: docker-desktop
current-context: docker-desktop
kind: Config
preferences: {}
users:
- name: docker-desktop
  user:
    client-certificate-data: DATA+OMITTED
    client-key-data: DATA+OMITTED
---

kubectl config current-context

---
PS E:\0.문서\2.교육\k8s> kubectl config current-context
docker-desktop

---
kubectl delete namespace [삭제할 네임스페이스 이름]
```
- 네임스페이스를 지울 경우 내부 리소스까지 모두 삭제된다.